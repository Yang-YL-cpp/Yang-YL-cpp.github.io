<script>
  (function() {
    function doRender() {
      if (typeof renderMathInElement === 'function') {
        renderMathInElement(document.body, {
          delimiters: [
            { left: '$$', right: '$$', display: true },
            { left: '$', right: '$', display: false },
            { left: '\\(', right: '\\)', display: false },
            { left: '\\[', right: '\\]', display: true }
          ],
          throwOnError: false
        });
        console.log('KaTeX rendered'); // 添加日志，看是否执行
      } else {
        console.warn('KaTeX not ready, retrying in 200ms');
        setTimeout(doRender, 200);
      }
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', doRender);
    } else {
      doRender();
    }
  })();
</script>
